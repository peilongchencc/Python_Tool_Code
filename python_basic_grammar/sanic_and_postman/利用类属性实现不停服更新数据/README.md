# 利用类属性实现不停服更新数据

## 运行方式:

1. 在Mysql中创建`marking_data_output.py`中的表格，使用我的代码创建也可以；

2. 随意在该表中写入一些数据，例如:

id|test_data|create_time|modify_time
---|---|---
1|黄金|2023-11-06 20:00:50|2023-11-06 20:00:50
2|芯片暴涨|2023-11-06 20:01:15|2023-11-06 22:23:34
3|军工板块|2023-11-06 20:01:35|2023-11-06 22:23:15

3. 运行`sanic_postman.py`文件；

4. 启动Postman，选择GET方法，URL填写下列内容:

```txt
http://8.140.203.xxx:8848/refresh
```

注意将ip修改为你自己的公网ip，参数不需要填写，输入URL后就可以直接点击Send。<br>

5. 再创建一个通信界面，选择POST方法，URL填写下列内容:

```txt
http://8.140.203.xxx:8848/ans
```

选择Body下 `x-www-form-urlencoded`选项，然后输入以下内容(Value中的值你可以随意输入):<br>

Key|Value|Description
---|---|---
usr_input | 请告诉我元数据是什么 | 


6. 点击Send,查看返回的结果，如果你和我的操作一样，看到的结果如下；

```json
{
    "用户数据": "请告诉我元数据是什么",
    "维度数据为:": [
        {
            "test_data": "军工板块"
        },
        {
            "test_data": "芯片暴涨"
        },
        {
            "test_data": "黄金"
        }
    ]
}
```

7. 现在，无论你是否修改了mysql对应表中的内容，只要你不执行数据刷新接口，结果都不会变。


8. 现在，假设你修改了mysql中该表中的内容，并且你修改后运行了**数据刷新接口**:

将"芯片暴涨"改为"暴涨"，新添加一行数据，具体修改如下:<br>

id|test_data|create_time|modify_time
---|---|---
1|黄金|2023-11-06 20:00:50|2023-11-06 20:00:50
2|暴涨|2023-11-06 20:01:15|2023-11-06 22:23:34
3|军工板块|2023-11-06 20:01:35|2023-11-06 22:23:15
4|百货商品|2023-11-06 22:42:30|2023-11-06 22:42:30

现在的形式:<br>

```json
{
    "用户数据": "请告诉我元数据是什么",
    "维度数据为:": [
        {
            "test_data": "军工板块"
        },
        {
            "test_data": "暴涨"
        },
        {
            "test_data": "百货商品"
        },
        {
            "test_data": "黄金"
        }
    ]
}
```

数据完美刷新～🚀🚀🚀<br>
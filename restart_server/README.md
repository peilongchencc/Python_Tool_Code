# Restart Server
- [Restart Server](#restart-server)
  - [项目描述：](#项目描述)
  - [个人配置：](#个人配置)
  - [Redis 配置：](#redis-配置)
  - [mysql配置:](#mysql配置)
  - [执行方式：](#执行方式)
  - [冷启动和热启动：](#冷启动和热启动)

## 项目描述：
设置定时任务，利用 Redis 每周一凌晨2点定时读取数据，如果 Redis 数据获取成功，向 mysql 中的 task_monitor 表写入成功信息。Redis 数据获取失败时，重启3次，如果连续3次重启都失败，向 mysql 中的 task_monitor 表写入失败信息，同时向企业微信个人账号发送报警消息。<br>
> 项目前提：将数据存入redis，设置过期时间为 "7天+1小时"。

## 个人配置：
系统：Ubuntu 18.04<br>
python 版本：Python 3.10.11<br>

## Redis 配置：
```python
host='localhost',               # 更改为你的 Redis 对应的ip，如果你也是本地，可以使用 localhost；
port = 6379,                    # # 默认，不需要更改；
```

## mysql配置:
```python
host='localhost',               # 更改为你的mysql对应的ip，如果你也是本地，可以使用 localhost；
user='root',                    # 账号名；
password='Flameaway3.',         # 密码；
database='irmdata',             # 数据库名称，根据你自己的需要更改；
port=3306,                      # 默认，不需要更改；
```

## 执行方式：
`crontab -e` 进入 crontab ，输入如下内容：
```shell
# 每周一凌晨2点更新 Redis 数据；
0 2 * * 1 /your_script_path/restart_get_redis.sh >> /your_log_path/get_redis_data.log  2>>/your_errorlog_path/crontab_error.log
```

这段代码用于定时执行一段Python代码，并将输出结果和错误信息保存到日志文件中。<br>
逐行解释下这段代码的含义：<br>
1. `0 2 * * 1` 表示每周一凌晨2点执行一次任务。
2. `/your_script_path/restart_get_redis.sh`：这是要执行的shell脚本。
4. `>> /your_log_path/get_redis_data.log`：这是将脚本的输出结果追加到指定的文件中。>>表示追加，如果文件不存在则会创建一个新文件。
5. `2>>/your_errorlog_path/crontab_error.log`：这是将脚本的错误信息追加到指定的文件中。2>>表示将标准错误输出重定向到文件中。
所以，这段代码的作用是每周一凌晨2点执行一次指定的shell脚本，并将输出结果追加到 `/your_log_path/get_redis_data.log` 文件中，同时将错误信息追加到 `/your_errorlog_path/crontab_error.log` 文件中。

## 冷启动和热启动：

程序**冷启动**🥶🥶🥶（Cold Start）通常指的是当一个应用程序或系统**首次启动**🚀🚀🚀，或者**在被完全关闭后再次启动**🚀🚀🚀的过程。在这种情况下，系统需要加载所有必要的资源、数据和配置，从而可能导致启动时间较长。<br>

在推荐系统中，“冷启动”也指的是一个系统对于新用户或新物品的推荐问题，因为系统还没有关于这些新用户或新物品的足够的交互数据。<br>

不同的上下文中，冷启动的含义可能略有不同，但通常都是指某种系统或程序在没有之前的会话或数据缓存的情况下的启动过程。<br>
<br>

在应用程序或系统的上下文中，**热启动**🔥🔥🔥通常指的是**应用已经运行过并且仍保留在内存**中，当再次启动或访问时，它可以迅速地恢复，因为所需的资源和数据已经加载并缓存在内存中。<br>

与冷启动相比，热启动的启动时间通常更短，因为大部分必要的资源和数据已经被加载或缓存。<br>

程序的热启动（Hot Start 或 Warm Start）是指在已经加载了必要数据和执行环境后，程序能够快速重新启动或恢复的过程。与之相对的是冷启动（Cold Start），冷启动指的是从程序完全停止的状态开始，需要加载程序代码、初始化执行环境、加载必要的数据等一系列操作后，程序才能开始运行。<br>

在后端开发中，热启动常见于以下场景：<br>

1. **缓存利用：** 程序在启动过程中，已经将频繁访问的数据加载到内存中的缓存里，这样在重启或重新启动服务时，可以直接利用这些缓存数据，而不需要重新从数据库或磁盘中加载，大大提高了启动速度和效率。

2. **服务不中断：** 对于需要高可用性的服务，热启动允许服务在更新、维护或配置更改时不需要完全停止再启动，而是能够快速重启或部分重载配置，保证服务的持续可用。

3. **会话持久化：** 在一些需要用户登录的应用中，热启动可以通过会话持久化技术保证用户在服务重启后无需重新登录，提升用户体验。

4. **动态编译与加载：** 在一些支持热部署的应用服务器上，可以在不停止运行的情况下，动态地编译和加载代码变更，实现快速迭代和部署。

热启动的主要优势在于提高了系统的响应速度和可用性，但它也可能带来复杂性增加、资源管理和释放上的挑战。因此，在设计和实现热启动功能时，需要综合考虑这些因素，确保系统的稳定性和性能。<br>